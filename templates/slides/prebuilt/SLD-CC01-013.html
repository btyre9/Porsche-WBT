<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1920">
  <title>You ARE Porsche</title>
  <style>
    @font-face {
      font-family: 'Porsche Next TT';
      src: url('../assets/fonts/porsche-next-tt.ttf') format('truetype');
      font-weight: 400; font-style: normal; font-display: block;
    }
    @font-face {
      font-family: 'Porsche Next TT';
      src: url('../assets/fonts/porsche-next-tt-bold.ttf') format('truetype');
      font-weight: 700; font-style: normal; font-display: block;
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      overflow: hidden;
      background: #111317;
      font-family: 'Porsche Next TT', 'Helvetica Neue', Arial, sans-serif;
      color: #fff;
    }

    :root {
      --accent:      #d5001c;
      --dark-0:      #111317;
      --dark-1:      #1e2128;
      --dark-2:      #2a2f39;
      --text:        #ffffff;
      --text-body:   rgba(255, 255, 255, 0.92);
      --card-bg:     rgba(255, 255, 255, 0.07);
      --card-border: rgba(255, 255, 255, 0.14);
    }

    /* ── Slide shell ─────────────────────────────────────────────── */
    .slide {
      position: relative;
      width: 1920px;
      height: 920px;
      overflow: hidden;
      background:
        radial-gradient(1600px 800px at 50% 18%, #343a48 0%, transparent 55%),
        linear-gradient(160deg, var(--dark-0) 0%, var(--dark-1) 50%, var(--dark-2) 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Grid texture */
    .slide::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,0.018) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.018) 1px, transparent 1px);
      background-size: 48px 48px;
      pointer-events: none;
      z-index: 0;
    }

    /* ── Atmosphere background ───────────────────────────────────── */
    .atmosphere {
      position: absolute;
  
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }
    .atmosphere img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center top;
      mix-blend-mode: 20%;
      opacity: .3;
      display: block;
    }

    /* Soft red glow behind headline */
    .headline-glow {
      position: absolute;
      top: 148px;
      left: 50%;
      transform: translateX(-50%);
      width: 1000px;
      height: 200px;
      background: radial-gradient(ellipse, rgba(213, 0, 28, 0.13) 0%, transparent 68%);
      pointer-events: none;
      z-index: 0;
    }

    /* ── Red corner accent ───────────────────────────────────────── */
    .top-accent {
      position: absolute;
      top: 0; left: 0;
      width: 120px; height: 6px;
      border-radius: 0 0 999px 0;
      background: var(--accent);
      z-index: 3;
    }

    /* ── Main content column ─────────────────────────────────────── */
    .content {
      position: relative;
      z-index: 2;
      width: 1560px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 44px;
    }

    /* ── Eyebrow ─────────────────────────────────────────────────── */
    .eyebrow {
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .eyebrow::before, .eyebrow::after {
      content: '';
      height: 1px;
      width: 56px;
      background: rgba(213, 0, 28, 0.38);
    }

    /* ── Headline ────────────────────────────────────────────────── */
    .headline {
      font-size: 62px;
      font-weight: 700;
      line-height: 1.12;
      color: var(--text);
      text-align: center;
      margin-bottom: 32px;
    }
    .headline .are { color: var(--accent); }

    /* ── Carousel wrap ───────────────────────────────────────────── */
    .carousel-wrap {
      position: relative;
      width: 100%;
      height: 280px;
      flex-shrink: 0;
      margin-bottom: 18px;
    }

    /* ── Carousel cards ──────────────────────────────────────────── */
    .carousel-card {
      position: absolute;
      width: 1180px;
      height: 280px;
      /* centered in 1560px content: (1560-1180)/2 = 190px */
      left: 190px;
      top: 0;
      background: rgba(22, 26, 34, 0.1);
      -webkit-backdrop-filter: blur(17px) saturate(1.4);
      backdrop-filter: blur(18px) saturate(1.4);
      border: 1.5px solid rgba(255, 255, 255, 0.3);
      border-top-color: rgba(255, 255, 255, 0.28);
      border-radius: 14px;
      padding: 28px 48px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      transform-origin: center center;
      box-shadow:
        0 4px 32px rgba(0, 0, 0, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.10);
    }

    .card-kicker {
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--accent);
      opacity: 0.88;
      flex-shrink: 0;
    }

    .card-title {
      font-size: 36px;
      font-weight: 700;
      color: var(--text);
      line-height: 1.15;
      flex-shrink: 0;
    }

    .card-body {
      font-size: 21px;
      color: var(--text-body);
      line-height: 1.55;
    }

    /* ── Pride grid (card-4) ─────────────────────────────────────── */
    .pride-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 40px;
    }

    .pride-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      font-size: 19px;
      color: var(--text-body);
      line-height: 1.45;
    }
    .pride-item::before {
      content: '';
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--accent);
      flex-shrink: 0;
      margin-top: 7px;
      opacity: 0.80;
    }

    /* ── Dot indicators ──────────────────────────────────────────── */
    .carousel-dots {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 28px;
    }
    .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.22);
    }

    /* ── CTA ─────────────────────────────────────────────────────── */
    .cta {
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      font-style: italic;
      color: var(--text);
      line-height: 1.3;
      padding: 0 120px;
    }
  </style>
</head>
<body>

  <div class="slide" data-slide-id="SLD-CC01-013" data-vo-cues="true">

    <div class="atmosphere">
      <img src="../assets/images/Ptech-customer14.webp" alt="">
    </div>
    <div class="headline-glow"></div>
    <div class="top-accent"></div>

    <div class="content">

      <div class="eyebrow" id="eyebrow">Module 1 · Closing</div>

      <h1 class="headline" id="headline">
        You Don't Just Work for Porsche—<br>
        You <span class="are">ARE</span> Porsche
      </h1>

      <!-- ── Carousel (5 cards) ────────────────────────────────── -->
      <div class="carousel-wrap">

        <div class="carousel-card" id="card-1">
          <div class="card-kicker">01 &nbsp;/&nbsp; 05</div>
          <div class="card-title">Every Interaction Represents the Brand</div>
          <div class="card-body">Customers don't separate you from Porsche. Their experience with you <em>is</em> their Porsche experience.</div>
        </div>

        <div class="carousel-card" id="card-2">
          <div class="card-kicker">02 &nbsp;/&nbsp; 05</div>
          <div class="card-title">You Embody Brand Values</div>
          <div class="card-body">In every conversation, you deliver on the Porsche promise — or you don't. There's no middle ground.</div>
        </div>

        <div class="carousel-card" id="card-3">
          <div class="card-kicker">03 &nbsp;/&nbsp; 05</div>
          <div class="card-title">Your Unique Position</div>
          <div class="card-body">Few people in the world reach your technical level. Combined with communication excellence, you become irreplaceable.</div>
        </div>

        <div class="carousel-card" id="card-4">
          <div class="card-kicker">04 &nbsp;/&nbsp; 05</div>
          <div class="card-title">Pride in the Role</div>
          <div class="pride-grid">
            <div class="pride-item">Earned your place through years of dedication</div>
            <div class="pride-item">These skills elevate you even further</div>
            <div class="pride-item">Complete professional: technical mastery + communication excellence</div>
            <div class="pride-item">A true Brand Ambassador in every sense</div>
          </div>
        </div>

        <div class="carousel-card" id="card-5">
          <div class="card-kicker">05 &nbsp;/&nbsp; 05</div>
          <div class="card-title">What's Next</div>
          <div class="card-body">In the next eleven modules, you'll develop specific communication techniques for every situation — frameworks for listening, questioning, explaining technical concepts, handling objections, and de-escalating difficult situations. By the end, you'll have the complete toolkit to confidently represent Porsche at the highest level.</div>
        </div>

      </div><!-- /.carousel-wrap -->

      <!-- Dot indicators (5) -->
      <div class="carousel-dots" id="carousel-dots">
        <div class="dot" id="dot-1"></div>
        <div class="dot" id="dot-2"></div>
        <div class="dot" id="dot-3"></div>
        <div class="dot" id="dot-4"></div>
        <div class="dot" id="dot-5"></div>
      </div>

      <!-- CTA — appears at VO end -->
      <div class="cta" id="cta">
        "You're ready. Let's build these skills together."
      </div>

    </div><!-- /.content -->

  </div><!-- /.slide -->

  <!-- Scale to viewport -->
  <script>
    (function () {
      var slide = document.querySelector('[data-slide-id]');
      function scaleSlide() {
        var s = Math.min(window.innerWidth / 1920, window.innerHeight / 920);
        slide.style.transform       = 'scale(' + s + ')';
        slide.style.transformOrigin = 'top left';
        slide.style.marginLeft      = ((window.innerWidth  - 1920 * s) / 2) + 'px';
        slide.style.marginTop       = ((window.innerHeight -  920 * s) / 2) + 'px';
      }
      window.addEventListener('resize', scaleSlide);
      scaleSlide();
    })();
  </script>

  <script src="../assets/vendor/gsap/gsap.min.js"></script>

  <script>
    // ── Initial hidden states (run before first paint) ────────────────────────
    gsap.set('#eyebrow',        { opacity: 0, y: 10 });
    gsap.set('#headline',       { opacity: 0, y: 20 });
    gsap.set('#card-1',         { opacity: 0 });
    gsap.set('#card-2',         { x: 1500, scale: 0.82, opacity: 0 });
    gsap.set('#card-3',         { x: 1500, scale: 0.82, opacity: 0 });
    gsap.set('#card-4',         { x: 1500, scale: 0.82, opacity: 0 });
    gsap.set('#card-5',         { x: 1500, scale: 0.82, opacity: 0 });
    gsap.set('#carousel-dots',  { opacity: 0 });
    gsap.set('#cta',            { opacity: 0, y: 12 });
  </script>

  <script>
/* Player compat shim — replaces SandboxRuntime in promoted slides */
(function () {
  var _tHandlers = [];
  var _eHandlers = [];
  var _lastTime = -1;
  var _wasPlaying = false;
  var _endedFired = false;

  function getCR() {
    try { return window.parent && window.parent.CourseRuntime; } catch (_) { return null; }
  }

  var fakeInteractionAudio = {
    src: '',
    play: function () {
      var cr = getCR();
      if (cr && this.src) cr.playInteractionAudio({ src: this.src });
      return Promise.resolve();
    },
    pause: function () {}
  };

  var fakeAudio = {
    get currentTime() {
      var cr = getCR();
      return cr ? (cr.getAudioCurrentTime() || 0) : 0;
    },
    get duration() {
      var cr = getCR();
      return cr && cr.getAudioDuration ? (cr.getAudioDuration() || 0) : 0;
    },
    addEventListener: function (type, fn) {
      if (type === 'timeupdate') _tHandlers.push(fn);
      else if (type === 'ended') _eHandlers.push(fn);
    },
    removeEventListener: function () {}
  };

  window.SandboxRuntime = {
    voAudio: fakeAudio,
    interactionAudio: fakeInteractionAudio,
    init: function () {},
    playInteractionClip: function (id) {
      var cr = getCR(); if (cr) cr.window.parent?.CourseRuntime?.playInteractionClip(id);
    }
  };

  function poll() {
    var cr = getCR();
    if (cr) {
      var t = cr.getAudioCurrentTime ? cr.getAudioCurrentTime() : 0;
      var playing = cr.isAudioPlaying ? cr.isAudioPlaying() : false;
      if (t !== _lastTime) {
        _lastTime = t;
        var e = { target: fakeAudio, type: 'timeupdate' };
        for (var i = 0; i < _tHandlers.length; i++) {
          try { _tHandlers[i](e); } catch (_e) {}
        }
      }
      if (_wasPlaying && !playing && !_endedFired && _eHandlers.length) {
        var dur = cr.getAudioDuration ? cr.getAudioDuration() : 0;
        if (dur > 0 && t >= dur - 0.5) {
          _endedFired = true;
          var ee = { target: fakeAudio, type: 'ended' };
          for (var j = 0; j < _eHandlers.length; j++) {
            try { _eHandlers[j](ee); } catch (_e) {}
          }
        }
      }
      _wasPlaying = playing;
      if (!playing && t === 0) _endedFired = false;
    }
    requestAnimationFrame(poll);
  }

  requestAnimationFrame(poll);

  // Listen for player-play-state to freeze/resume GSAP and CSS animations
  (function () {
    var styleInjected = false;
    function ensurePauseStyle() {
      if (styleInjected) return;
      styleInjected = true;
      var s = document.createElement('style');
      s.textContent = 'html.slide-paused * { animation-play-state: paused !important; }';
      document.head.appendChild(s);
    }
    window.addEventListener('message', function (e) {
      if (!e.data || e.data.type !== 'player-play-state') return;
      ensurePauseStyle();
      if (e.data.playing) {
        if (window.gsap) window.gsap.globalTimeline.resume();
        document.documentElement.classList.remove('slide-paused');
      } else {
        if (window.gsap) window.gsap.globalTimeline.pause();
        document.documentElement.classList.add('slide-paused');
      }
    });
  })();
})();
</script>

  <script>
    // ── VO timestamps (seconds) ───────────────────────────────────────────────
    // ⚠️  If you adjust timing, update BOTH here AND sandbox/animation-cues/SLD-CC01-013.json
    var T_CARD1 = 10.0;
    var T_CARD2 = 33.0;
    var T_CARD3 = 44.0;
    var T_CARD4 = 66.0;
    var T_CARD5 = 92.0;

    // ── Dot helper ────────────────────────────────────────────────────────────
    function setActiveDot(n) {
      for (var i = 1; i <= 5; i++) {
        var el = document.getElementById('dot-' + i);
        if (i === n) {
          gsap.to(el, { width: 24, backgroundColor: '#d5001c', duration: 0.35 });
        } else {
          gsap.to(el, { width: 8, backgroundColor: 'rgba(255,255,255,0.22)', duration: 0.35 });
        }
      }
    }

    // ── Generic carousel transition ───────────────────────────────────────────
    // Card n slides to center; n-1 drifts left; older cards exit off-screen left.
    function activateCard(n) {
      for (var i = 1; i <= 5; i++) {
        if (i === n) {
          gsap.to('#card-' + i, { x: 0, scale: 1, opacity: 1, duration: 0.72, ease: 'power2.inOut' });
        } else if (i === n - 1) {
          gsap.to('#card-' + i, { x: -860, scale: 0.80, opacity: 0.30, duration: 0.72, ease: 'power2.inOut' });
        } else if (i < n - 1) {
          gsap.to('#card-' + i, { x: -1600, opacity: 0, duration: 0.55, ease: 'power2.inOut' });
        }
        // Cards where i > n remain off-screen right — no animation needed
      }
      setActiveDot(n);
    }

    // ── Entrance: eyebrow + headline on load ──────────────────────────────────
    window.addEventListener('DOMContentLoaded', function () {
      gsap.to('#eyebrow',  { opacity: 1, y: 0, duration: 0.50, ease: 'power2.out', delay: 0.20 });
      gsap.to('#headline', { opacity: 1, y: 0, duration: 0.65, ease: 'power2.out', delay: 0.44 });
    });

    // ── VO-driven carousel transitions ────────────────────────────────────────
    var revealed = {};

    SandboxRuntime.voAudio.addEventListener('timeupdate', function () {
      var t = SandboxRuntime.voAudio.currentTime;

      if (!revealed.c1 && t >= T_CARD1) {
        revealed.c1 = true;
        // Card 1: simple fade-in (no slide, it's the first entry)
        gsap.to('#card-1', { opacity: 1, duration: 0.65, ease: 'power2.out' });
        gsap.to('#carousel-dots', { opacity: 1, duration: 0.40, ease: 'power2.out' });
        setActiveDot(1);
      }
      if (!revealed.c2 && t >= T_CARD2) { revealed.c2 = true; activateCard(2); }
      if (!revealed.c3 && t >= T_CARD3) { revealed.c3 = true; activateCard(3); }
      if (!revealed.c4 && t >= T_CARD4) { revealed.c4 = true; activateCard(4); }
      if (!revealed.c5 && t >= T_CARD5) { revealed.c5 = true; activateCard(5); }
    });

    // ── VO ended: CTA + interaction sound ────────────────────────────────────
    SandboxRuntime.voAudio.addEventListener('ended', function () {
      gsap.to('#cta', { opacity: 1, y: 0, duration: 0.70, ease: 'power2.out' });
      SandboxRuntime.window.parent?.CourseRuntime?.playInteractionClip('SLD-CC01-002-next-button');
    });
  </script>

</body>
</html>
